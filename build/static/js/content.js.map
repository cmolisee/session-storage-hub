{"version":3,"file":"static/js/content.js","mappings":"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","sources":["types/types.ts","utils/helperUtils.ts","../webpack/bootstrap","../webpack/runtime/define property getters","../webpack/runtime/hasOwnProperty shorthand","../webpack/runtime/make namespace object","chromeServices/content.ts"],"sourcesContent":["export enum Sender {\n\tWebpage,\n\tExtension,\n}\n\nexport enum Action {\n\tRequest,\n\tUpdate,\n\tPost,\n\tCheck,\n}\n\nexport interface IChromeMessage {\n\tfrom: Sender;\n\taction: Action;\n\tmessage: any;\n}\n\nexport interface IMessageResponse {\n\terror: string | null;\n\tdata: any;\n}\n\nexport type TVersionData = {\n\tisUpToDate?: boolean;\n\ttimestamp?: number;\n\treleaseUrl?: string;\n};\n","export const MS_TO_HR_FACTOR: number = 2777777;\n\nexport function convertMsToHr(ms: number) {\n\treturn ms / MS_TO_HR_FACTOR;\n}\n\nexport function getKeyByValue(value: string, e: object) {\n\tfor (const key in e) {\n\t\tif (e[key as keyof typeof e] === value) {\n\t\t\treturn key;\n\t\t}\n\t}\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import {\n\tAction,\n\tIChromeMessage,\n\tIMessageResponse,\n\tSender,\n\tTVersionData,\n} from '../types/types';\nimport { convertMsToHr } from '../utils/helperUtils';\n\ntype TResponse = (response?: IMessageResponse) => void;\n\nconst validateSender = (\n\texpectedSender: Sender,\n\texpectedAction: Action,\n\tmessage: IChromeMessage,\n\tsender: chrome.runtime.MessageSender\n) => {\n\treturn (\n\t\tsender.id === chrome.runtime.id &&\n\t\tmessage.from === expectedSender &&\n\t\tmessage.action === expectedAction\n\t);\n};\n\nconst requestMessageListener = (\n\tmessage: IChromeMessage,\n\tsender: chrome.runtime.MessageSender,\n\tresponse: TResponse\n) => {\n\tif (validateSender(Sender.Extension, Action.Request, message, sender)) {\n\t\tconst data = Object.assign({}, sessionStorage);\n\n\t\tresponse({\n\t\t\terror: !data ? 'Error retrieving session storage' : null,\n\t\t\tdata: data,\n\t\t});\n\t\treturn true; // we will eventually return a response\n\t}\n\treturn false; // do not expect a response\n};\n\nconst updateMessageListener = (\n\tmessage: IChromeMessage,\n\tsender: chrome.runtime.MessageSender,\n\tresponse: TResponse\n) => {\n\tif (validateSender(Sender.Extension, Action.Update, message, sender)) {\n\t\ttry {\n\t\t\tObject.entries(message.message?.clipboard ?? {}).forEach((e) => {\n\t\t\t\tsessionStorage.setItem(e[0], e[1] as string);\n\t\t\t});\n\n\t\t\tconst data = Object.assign({}, sessionStorage);\n\t\t\tresponse({ error: null, data: data });\n\t\t} catch {\n\t\t\tresponse({\n\t\t\t\terror: 'Error updating session storage data',\n\t\t\t\tdata: null,\n\t\t\t});\n\t\t}\n\t\treturn true; // we will eventually return a response\n\t}\n\treturn false; // do not expect a response\n};\n\n// messageListeners must return a boolean so they cannot be async\nconst checkReleaseListener = (\n\tmessage: IChromeMessage,\n\tsender: chrome.runtime.MessageSender,\n\tresponse: TResponse\n) => {\n\tif (validateSender(Sender.Extension, Action.Check, message, sender)) {\n\t\ttry {\n\t\t\t// request release information from local storage\n\t\t\tchrome.storage.sync.get('versionData', (data: TVersionData) => {\n\t\t\t\t// if it does not exist, no message passed in message request, or >5hrs since last check\n\t\t\t\t// get data from api request\n\t\t\t\tif (\n\t\t\t\t\t!message.message ||\n\t\t\t\t\t!message.message.timestamp ||\n\t\t\t\t\tmessage.message.forceCheck ||\n\t\t\t\t\t!data ||\n\t\t\t\t\t!data.timestamp ||\n\t\t\t\t\tconvertMsToHr(message.message.timestamp - data.timestamp) >\n\t\t\t\t\t\t5\n\t\t\t\t) {\n\t\t\t\t\tfetch(\n\t\t\t\t\t\t'https://api.github.com/repos/cmolisee/session-storage-hub/releases/latest'\n\t\t\t\t\t)\n\t\t\t\t\t\t.then((res) => res.json())\n\t\t\t\t\t\t.then((releaseData) => {\n\t\t\t\t\t\t\tconst latestVersion =\n\t\t\t\t\t\t\t\treleaseData['tag_name'].slice(1);\n\n\t\t\t\t\t\t\tconst resData: TVersionData = {\n\t\t\t\t\t\t\t\tisUpToDate:\n\t\t\t\t\t\t\t\t\tlatestVersion === process.env.VERSION,\n\t\t\t\t\t\t\t\ttimestamp: new Date().getTime(),\n\t\t\t\t\t\t\t\treleaseUrl: releaseData['html_url'],\n\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\tresponse({ error: null, data: resData });\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch((err) => console.log(err));\n\t\t\t\t} else {\n\t\t\t\t\t// otherwise data exists, is up to date\n\t\t\t\t\tresponse({ error: null, data: data });\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t});\n\t\t} catch {\n\t\t\tresponse({\n\t\t\t\terror: 'Error checking for updated release',\n\t\t\t\tdata: {},\n\t\t\t});\n\t\t}\n\t\treturn true; // we will eventually return a response\n\t}\n\treturn false; // do not expect a response\n};\n\nconst main = () => {\n\t// Fired when a message is sent from either an extension process or a content script.\n\tchrome.runtime.onMessage.addListener(requestMessageListener);\n\tchrome.runtime.onMessage.addListener(updateMessageListener);\n\tchrome.runtime.onMessage.addListener(checkReleaseListener);\n};\n\nmain();\n"],"names":["Sender","Action","MS_TO_HR_FACTOR","convertMsToHr","ms","getKeyByValue","value","e","key","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","d","definition","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","r","Symbol","toStringTag","validateSender","expectedSender","expectedAction","message","sender","id","chrome","runtime","from","action","requestMessageListener","response","Extension","Request","data","assign","sessionStorage","error","updateMessageListener","Update","_message$message$clip","_message$message","entries","clipboard","forEach","setItem","_unused","checkReleaseListener","Check","storage","sync","timestamp","forceCheck","fetch","then","res","json","releaseData","resData","isUpToDate","process","slice","Date","getTime","releaseUrl","catch","err","console","log","_unused2","onMessage","addListener"],"sourceRoot":""}